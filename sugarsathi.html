<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="img/jpeg" href="C:\Users\Azra Khan\Downloads\logo.jpeg">
    <title>Sugar Sathi - Your Sugar, Your Sathi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            /* Updated to match logo's light teal background */
            background: #eaf3f2;
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .page {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            animation: fadeIn 0.5s ease-in;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .logo {
            text-align: center;
            margin-bottom: 30px;
        }

        /* Use your logo image instead of the old text logo */
        .logo img {
            max-width: 220px;
            margin-bottom: 10px;
        }

        .logo p {
            color: #0a7a77;
            font-style: italic;
            font-size: 1.1em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #0a7a77;
        }

        .btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #0a7a77 0%, #52b1ab 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            margin-top: 20px;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn:active {
            transform: translateY(0);
        }

        .subscription-plans {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }

        .plan {
            border: 2px solid #e1e5e9;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .plan:hover {
            border-color: #0a7a77;
            transform: translateY(-2px);
        }

        .plan.selected {
            border-color: #0a7a77;
            background: linear-gradient(135deg, #0a7a7710, #52b1ab10);
        }

        .plan-price {
            font-size: 2em;
            font-weight: bold;
            color: #0a7a77;
            margin-bottom: 10px;
        }

        .plan-duration {
            color: #666;
            font-size: 1.1em;
        }

        .plan-features {
            margin-top: 15px;
            color: #555;
            font-size: 0.9em;
        }

        .payment-methods {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .payment-method {
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .payment-method:hover, .payment-method.selected {
            border-color: #0a7a77;
            background: #0a7a7710;
        }

        .dashboard {
            display: grid;
            gap: 20px;
        }

        .card {
            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .card h3 {
            color: #0a7a77;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .sugar-level {
            font-size: 2.5em;
            font-weight: bold;
            text-align: center;
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
        }

        .sugar-normal { background: #d4edda; color: #155724; }
        .sugar-warning { background: #fff3cd; color: #856404; }
        .sugar-danger { background: #f8d7da; color: #721c24; }

        .reminder {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            border-radius: 0 10px 10px 0;
            margin: 10px 0;
        }

        .exercise-card {
            background: linear-gradient(135deg, #ff9a56 0%, #ff6b6b 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
        }

        .diet-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            margin: 8px 0;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e1e5e9;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #0a7a77, #52b1ab);
            transition: width 0.3s ease;
        }

        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 20px;
        }

        .nav-tab {
            flex: 1;
            padding: 10px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .nav-tab.active {
            background: #0a7a77;
            color: white;
        }

        .tracker-input {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .tracker-input input {
            flex: 1;
        }

        .tracker-history {
            max-height: 200px;
            overflow-y: auto;
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }

        .back-btn {
            background: #6c757d;
            width: auto;
            padding: 10px 20px;
            margin-right: 10px;
            display: inline-block;
        }

        .medication-reminder {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            text-align: center;
        }

        .stress-meter {
            text-align: center;
            margin: 20px 0;
        }

        .stress-level {
            display: inline-block;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            line-height: 80px;
            font-weight: bold;
            font-size: 1.2em;
            margin: 10px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .stress-level:hover {
            transform: scale(1.1);
        }

        .stress-low { background: #d4edda; color: #155724; }
        .stress-medium { background: #fff3cd; color: #856404; }
        .stress-high { background: #f8d7da; color: #721c24; }

        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }
            .page {
                padding: 20px;
            }
            .payment-methods {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Login Page -->
        <div class="page active" id="loginPage">
            <div class="logo">
                <!-- Use the provided logo image -->
                <img src="C:\Users\Azra Khan\Downloads\logo.jpeg" alt="Sugar Sathi Logo">
                <p>Your Sugar, Your Sathi</p>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit" class="btn">Login to Sugar Sathi</button>
            </form>
            <p style="text-align: center; margin-top: 20px; color: #666;">
                New user? <a href="#" onclick="showPage('registerPage')" style="color: #0a7a77;">Create Account</a>
            </p>
        </div>

        <!-- Registration Page -->
        <div class="page" id="registerPage">
            <div class="logo">
                <img src="C:\Users\Azra Khan\Downloads\logo.jpeg" alt="Sugar Sathi Logo">
                <p>Join Your Health Journey</p>
            </div>
            <form id="registerForm">
                <div class="form-group">
                    <label for="regEmail">Email Address</label>
                    <input type="email" id="regEmail" required>
                </div>
                <div class="form-group">
                    <label for="regPassword">Password</label>
                    <input type="password" id="regPassword" required>
                </div>
                <button type="submit" class="btn">Create Account</button>
            </form>
        </div>

        <!-- Profile Setup Page -->
        <div class="page" id="profilePage">
            <div class="logo">
                <img src="C:\Users\Azra Khan\Downloads\logo.jpeg" alt="Sugar Sathi Logo">
                <p>Complete Your Profile</p>
            </div>
            <form id="profileForm">
                <div class="form-group">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" required>
                </div>
                <div class="form-group">
                    <label for="age">Age</label>
                    <input type="number" id="age" min="1" max="120" required>
                </div>
                <div class="form-group">
                    <label for="gender">Gender</label>
                    <select id="gender" required>
                        <option value="">Select Gender</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="height">Height (cm)</label>
                    <input type="number" id="height" min="50" max="250" required>
                </div>
                <div class="form-group">
                    <label for="weight">Weight (kg)</label>
                    <input type="number" id="weight" min="20" max="300" required>
                </div>
                <div class="form-group">
                    <label for="bloodType">Blood Type</label>
                    <select id="bloodType" required>
                        <option value="">Select Blood Type</option>
                        <option value="A+">A+</option>
                        <option value="A-">A-</option>
                        <option value="B+">B+</option>
                        <option value="B-">B-</option>
                        <option value="AB+">AB+</option>
                        <option value="AB-">AB-</option>
                        <option value="O+">O+</option>
                        <option value="O-">O-</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="sugarLevel">Current Sugar Level (mg/dL)</label>
                    <input type="number" id="sugarLevel" min="50" max="500" required>
                </div>
                <div class="form-group">
                    <label for="medications">Current Medications</label>
                    <textarea id="medications" rows="3" placeholder="List your current medications..."></textarea>
                </div>
                <div class="form-group">
                    <label for="medicationFile">Upload Medication Prescription</label>
                    <input type="file" id="medicationFile" accept="image/*,.pdf">
                </div>
                <button type="submit" class="btn">Continue to Subscription</button>
            </form>
        </div>

        <!-- Subscription Page -->
        <div class="page" id="subscriptionPage">
            <div class="logo">
                <img src="C:\Users\Azra Khan\Downloads\logo.jpeg" alt="Sugar Sathi Logo">
                <p>Choose Your Plan</p>
            </div>
            <div class="subscription-plans">
                <div class="plan" data-plan="monthly" onclick="selectPlan('monthly')">
                    <div class="plan-price">‚Çπ59</div>
                    <div class="plan-duration">1 Month</div>
                    <div class="plan-features">
                        ‚Ä¢ Personalized diet plans<br>
                        ‚Ä¢ Sugar level tracking<br>
                        ‚Ä¢ Exercise recommendations<br>
                        ‚Ä¢ Medication reminders
                    </div>
                </div>
                <div class="plan" data-plan="halfyearly" onclick="selectPlan('halfyearly')">
                    <div class="plan-price">‚Çπ299</div>
                    <div class="plan-duration">6 Months</div>
                    <div class="plan-features">
                        ‚Ä¢ All monthly features<br>
                        ‚Ä¢ Priority support<br>
                        ‚Ä¢ Advanced analytics<br>
                        ‚Ä¢ <strong>Save ‚Çπ55!</strong>
                    </div>
                </div>
                <div class="plan selected" data-plan="yearly" onclick="selectPlan('yearly')">
                    <div class="plan-price">‚Çπ499</div>
                    <div class="plan-duration">1 Year</div>
                    <div class="plan-features">
                        ‚Ä¢ All premium features<br>
                        ‚Ä¢ 24/7 support<br>
                        ‚Ä¢ Detailed health reports<br>
                        ‚Ä¢ <strong>Save ‚Çπ209!</strong>
                    </div>
                </div>
            </div>
            <p style="text-align: center; color: #666; margin: 20px 0;">
                Outside consultation costs ‚Çπ500 per session. Get unlimited access with our plans!
            </p>
            <h3 style="margin-bottom: 15px;">Choose Payment Method</h3>
            <div class="payment-methods">
                <div class="payment-method selected" data-method="googlepay" onclick="selectPayment('googlepay')">
                    <strong>Google Pay</strong>
                </div>
                <div class="payment-method" data-method="paytm" onclick="selectPayment('paytm')">
                    <strong>Paytm</strong>
                </div>
                <div class="payment-method" data-method="phonepe" onclick="selectPayment('phonepe')">
                    <strong>PhonePe</strong>
                </div>
                <div class="payment-method" data-method="paypal" onclick="selectPayment('paypal')">
                    <strong>PayPal</strong>
                </div>
            </div>
            <button onclick="processPayment()" class="btn">Pay ‚Çπ499 & Start Journey</button>
        </div>

        <!-- Dashboard Page -->
        <div class="page" id="dashboardPage">
            <div class="logo">
                <img src="C:\Users\Azra Khan\Downloads\logo.jpeg" alt="Sugar Sathi Logo">
                <p>Your Health Dashboard</p>
            </div>
            <div class="nav-tabs">
                <div class="nav-tab active" onclick="showTab('overview')">Overview</div>
                <div class="nav-tab" onclick="showTab('diet')">Diet</div>
                <div class="nav-tab" onclick="showTab('exercise')">Exercise</div>
                <div class="nav-tab" onclick="showTab('tracker')">Tracker</div>
            </div>
            <!-- Overview Tab -->
            <div class="tab-content" id="overviewTab">
                <div class="card">
                    <h3>Current Sugar Level</h3>
                    <div class="sugar-level sugar-normal" id="currentSugarLevel">120 mg/dL</div>
                    <p style="text-align: center; color: #666;">Normal Range</p>
                </div>
                <div class="medication-reminder">
                    <h4>üîî Medicine Reminder</h4>
                    <p>Time for your evening Metformin - 500mg</p>
                    <small>Next: Tomorrow 8:00 AM</small>
                </div>
                <div class="reminder">
                    <h4>üìÖ Next Sugar Test</h4>
                    <p>Recommended: <strong>Tomorrow Morning</strong></p>
                    <small>Based on your current levels, daily monitoring recommended</small>
                </div>
                <div class="card">
                    <h3>Health Progress</h3>
                    <div style="margin: 15px 0;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span>Weekly Goal</span>
                            <span>75%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 75%"></div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h3>Stress Management</h3>
                    <div class="stress-meter">
                        <p>How are you feeling today?</p>
                        <div class="stress-level stress-low" onclick="setStressLevel('low')">üòä<br>Good</div>
                        <div class="stress-level stress-medium" onclick="setStressLevel('medium')">üòê<br>OK</div>
                        <div class="stress-level stress-high" onclick="setStressLevel('high')">üò∞<br>Stressed</div>
                    </div>
                    <div id="stressAdvice" style="margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 10px; display: none;">
                        <h4>Recommended: 10-minute meditation</h4>
                        <p>Take deep breaths and try our guided meditation to reduce stress levels.</p>
                    </div>
                </div>
            </div>
            <!-- Diet Tab -->
            <div class="tab-content" id="dietTab" style="display: none;">
                <div class="card">
                    <h3>Today's Diet Plan</h3>
                    <div id="dietPlan">
                        <div class="diet-item">
                            <div>
                                <strong>Breakfast</strong><br>
                                <small>2 Wheat Rotis + Dal + Vegetable</small>
                            </div>
                            <span>‚úÖ</span>
                        </div>
                        <div class="diet-item">
                            <div>
                                <strong>Mid-Morning</strong><br>
                                <small>1 Apple + Green Tea</small>
                            </div>
                            <span>‚è∞</span>
                        </div>
                        <div class="diet-item">
                            <div>
                                <strong>Lunch</strong><br>
                                <small>Brown Rice + Fish Curry + Salad</small>
                            </div>
                            <span>‚è∞</span>
                        </div>
                        <div class="diet-item">
                            <div>
                                <strong>Evening</strong><br>
                                <small>Nuts (10 pieces) + Buttermilk</small>
                            </div>
                            <span>‚è∞</span>
                        </div>
                        <div class="diet-item">
                            <div>
                                <strong>Dinner</strong><br>
                                <small>2 Rotis + Vegetable + Raita</small>
                            </div>
                            <span>‚è∞</span>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h3>Recommended Fruits</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <div class="diet-item">üçé Apple</div>
                        <div class="diet-item">ü•ù Kiwi</div>
                        <div class="diet-item">üçä Orange</div>
                        <div class="diet-item">ü´ê Berries</div>
                    </div>
                </div>
                <div class="card">
                    <h3>Foods to Avoid</h3>
                    <div style="color: #dc3545;">
                        <p>‚Ä¢ White Rice ‚Ä¢ Sweets ‚Ä¢ Fried Foods ‚Ä¢ Processed Foods</p>
                    </div>
                </div>
            </div>
            <!-- Exercise Tab -->
            <div class="tab-content" id="exerciseTab" style="display: none;">
                <div class="exercise-card">
                    <h3>üèÉ‚Äç‚ôÇ Today's Exercise Plan</h3>
                    <div id="exercisePlan">
                        <div style="margin: 15px 0;">
                            <h4>Morning Walk</h4>
                            <p>30 minutes brisk walking</p>
                            <small>Best time: 6:00 AM - 7:00 AM</small>
                        </div>
                        <div style="margin: 15px 0;">
                            <h4>Yoga Session</h4>
                            <p>15 minutes breathing exercises</p>
                            <small>Pranayama recommended for your age group</small>
                        </div>
                        <div style="margin: 15px 0;">
                            <h4>Evening Activity</h4>
                            <p>Light stretching or meditation</p>
                            <small>Helps reduce stress and improve sleep</small>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h3>Exercise Tips</h3>
                    <p>‚Ä¢ Check sugar levels before exercise<br>
                    ‚Ä¢ Keep glucose tablets handy<br>
                    ‚Ä¢ Stay hydrated<br>
                    ‚Ä¢ Stop if you feel dizzy</p>
                </div>
            </div>
            <!-- Tracker Tab -->
            <div class="tab-content" id="trackerTab" style="display: none;">
                <div class="card">
                    <h3>Sugar Level Tracker</h3>
                    <div class="tracker-input">
                        <input type="number" id="newSugarLevel" placeholder="Sugar Level (mg/dL)" min="50" max="500">
                        <input type="time" id="testTime">
                        <button onclick="addSugarReading()" style="padding: 12px 20px; background: #0a7a77; color: white; border: none; border-radius: 8px; cursor: pointer;">Add</button>
                    </div>
                    <div class="tracker-history" id="sugarHistory">
                        <div class="history-item">
                            <div>
                                <strong>120 mg/dL</strong><br>
                                <small>Normal</small>
                            </div>
                            <div>
                                <small>Today 8:00 AM</small>
                            </div>
                        </div>
                        <div class="history-item">
                            <div>
                                <strong>140 mg/dL</strong><br>
                                <small>Slightly High</small>
                            </div>
                            <div>
                                <small>Yesterday 8:00 PM</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <h3>Medication Tracker</h3>
                    <div style="margin: 15px 0;">
                        <div class="diet-item">
                            <div>
                                <strong>Metformin 500mg</strong><br>
                                <small>Morning - Taken ‚úÖ</small>
                            </div>
                            <button onclick="markMedicine('morning')" style="padding: 5px 15px; background: #28a745; color: white; border: none; border-radius: 5px;">‚úì</button>
                        </div>
                        <div class="diet-item">
                            <div>
                                <strong>Metformin 500mg</strong><br>
                                <small>Evening - Pending ‚è∞</small>
                            </div>
                            <button onclick="markMedicine('evening')" style="padding: 5px 15px; background: #ffc107; color: black; border: none; border-radius: 5px;">‚è∞</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        // --- JavaScript is unchanged from your previous code except for logo name and background color ---
        let currentUser = {};
        let selectedPlan = 'yearly';
        let selectedPayment = 'googlepay';
        let sugarReadings = [
            { level: 120, time: '8:00 AM', date: 'Today', status: 'Normal' },
            { level: 140, time: '8:00 PM', date: 'Yesterday', status: 'Slightly High' }
        ];

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
        }

        function showTab(tabName) {
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.style.display = 'none';
            });

            event.target.classList.add('active');
            document.getElementById(tabName + 'Tab').style.display = 'block';
        }

        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            if (email && password) {
                currentUser.email = email;
                showPage('dashboardPage');
                initializeDashboard();
            }
        });

        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('regEmail').value;
            const password = document.getElementById('regPassword').value;
            if (email && password) {
                currentUser.email = email;
                showPage('profilePage');
            }
        });

        document.getElementById('profileForm').addEventListener('submit', function(e) {
            e.preventDefault();
            currentUser.name = document.getElementById('name').value;
            currentUser.age = parseInt(document.getElementById('age').value);
            currentUser.gender = document.getElementById('gender').value;
            currentUser.height = parseInt(document.getElementById('height').value);
            currentUser.weight = parseInt(document.getElementById('weight').value);
            currentUser.bloodType = document.getElementById('bloodType').value;
            currentUser.sugarLevel = parseInt(document.getElementById('sugarLevel').value);
            currentUser.medications = document.getElementById('medications').value;
            showPage('subscriptionPage');
        });

        function selectPlan(plan) {
            document.querySelectorAll('.plan').forEach(p => p.classList.remove('selected'));
            document.querySelector('[data-plan="' + plan + '"]').classList.add('selected');
            selectedPlan = plan;

            const prices = { monthly: 59, halfyearly: 299, yearly: 499 };
            document.querySelector('.btn').textContent = Pay ‚Çπ${prices[plan]} & Start Journey;
        }

        function selectPayment(method) {
            document.querySelectorAll('.payment-method').forEach(p => p.classList.remove('selected'));
            document.querySelector('[data-method="' + method + '"]').classList.add('selected');
            selectedPayment = method;
        }

        function processPayment() {
            const prices = { monthly: 59, halfyearly: 299, yearly: 499 };
            const amount = prices[selectedPlan];
            alert(Processing payment of ‚Çπ${amount} via ${selectedPayment.toUpperCase()}...);
            setTimeout(() => {
                alert('Payment successful! Welcome to Sugar Sathi!');
                showPage('dashboardPage');
                initializeDashboard();
            }, 2000);
        }

        function initializeDashboard() {
            if (currentUser.sugarLevel) {
                updateSugarDisplay(currentUser.sugarLevel);
                generatePersonalizedContent();
            }
        }

        function updateSugarDisplay(level) {
            const sugarElement = document.getElementById('currentSugarLevel');
            sugarElement.textContent = ${level} mg/dL;
            sugarElement.className = 'sugar-level ';
            if (level < 100) {
                sugarElement.className += 'sugar-warning';
                sugarElement.nextElementSibling.textContent = 'Low - Monitor Closely';
            } else if (level <= 140) {
                sugarElement.className += 'sugar-normal';
                sugarElement.nextElementSibling.textContent = 'Normal Range';
            } else if (level <= 180) {
                sugarElement.className += 'sugar-warning';
                sugarElement.nextElementSibling.textContent = 'Slightly High';
            } else {
                sugarElement.className += 'sugar-danger';
                sugarElement.nextElementSibling.textContent = 'High - Consult Doctor';
            }
        }

        function generatePersonalizedContent() {
            generateDietPlan();
            generateExercisePlan();
            updateTestReminder();
        }

        function generateDietPlan() {
            const sugarLevel = currentUser.sugarLevel || 120;
            const dietContainer = document.getElementById('dietPlan');
            let breakfast, lunch, dinner, snacks;

            if (sugarLevel > 180) {
                breakfast = "1 Wheat Roti + Vegetable + Green Tea";
                lunch = "Brown Rice (small portion) + Dal + Salad";
                dinner = "1 Roti + Vegetable + Buttermilk";
                snacks = "Cucumber + Nuts (5 pieces)";
            } else if (sugarLevel > 140) {
                breakfast = "2 Wheat Rotis + Dal + Vegetable";
                lunch = "Brown Rice + Fish/Chicken + Salad";
                dinner = "2 Rotis + Vegetable + Raita";
                snacks = "Apple + Green Tea";
            } else {
                breakfast = "2 Wheat Rotis + Dal + Vegetable + Milk";
                lunch = "Brown Rice + Curry + Salad + Curd";
                dinner = "2 Rotis + Vegetable + Raita";
                snacks = "Fruits + Nuts";
            }

            dietContainer.innerHTML = `
                <div class="diet-item">
                    <div><strong>Breakfast</strong><br><small>${breakfast}</small></div>
                    <span>‚úÖ</span>
                </div>
                <div class="diet-item">
                    <div><strong>Mid-Morning</strong><br><small>${snacks}</small></div>
                    <span>‚è∞</span>
                </div>
                <div class="diet-item">
                    <div><strong>Lunch</strong><br><small>${lunch}</small></div>
                    <span>‚è∞</span>
                </div>
                <div class="diet-item">
                    <div><strong>Evening</strong><br><small>Nuts (10 pieces) + Buttermilk</small></div>
                    <span>‚è∞</span>
                </div>
                <div class="diet-item">
                    <div><strong>Dinner</strong><br><small>${dinner}</small></div>
                    <span>‚è∞</span>
                </div>
            `;
        }

        function generateExercisePlan() {
            const age = currentUser.age || 30;
            const exerciseContainer = document.getElementById('exercisePlan');
            let exercises;
            if (age >= 60) {
                exercises = `
                    <div style="margin: 15px 0;">
                        <h4>Morning Walk</h4>
                        <p>20-30 minutes gentle walking</p>
                        <small>Best time: 6:00 AM - 7:00 AM</small>
                    </div>
                    <div style="margin: 15px 0;">
                        <h4>Simple Yoga</h4>
                        <p>15 minutes breathing exercises & gentle stretches</p>
                        <small>Pranayama and basic asanas</small>
                    </div>
                    <div style="margin: 15px 0;">
                        <h4>Meditation</h4>
                        <p>10 minutes mindful meditation</p>
                        <small>Helps reduce stress and improve mental health</small>
                    </div>
                `;
            } else {
                exercises = `
                    <div style="margin: 15px 0;">
                        <h4>Brisk Walking/Jogging</h4>
                        <p>30-45 minutes cardio workout</p>
                        <small>Best time: 6:00 AM - 7:00 AM or 6:00 PM - 7:00 PM</small>
                    </div>
                    <div style="margin: 15px 0;">
                        <h4>Yoga/Aerobics</h4>
                        <p>20 minutes strength and flexibility</p>
                        <small>Mix of aerobic exercises and yoga poses</small>
                    </div>
                    <div style="margin: 15px 0;">
                        <h4>Meditation</h4>
                        <p>10 minutes stress relief</p>
                        <small>Deep breathing and mindfulness</small>
                    </div>
                `;
            }
            exerciseContainer.innerHTML = exercises;
        }

        function updateTestReminder() {
            const sugarLevel = currentUser.sugarLevel || 120;
            const reminderElement = document.querySelector('.reminder p');
            if (sugarLevel > 180) {
                reminderElement.innerHTML = 'Recommended: <strong>Twice Daily</strong>';
                reminderElement.nextElementSibling.textContent = 'High levels require frequent monitoring';
            } else if (sugarLevel > 140) {
                reminderElement.innerHTML = 'Recommended: <strong>Daily</strong>';
                reminderElement.nextElementSibling.textContent = 'Daily monitoring recommended for better control';
            } else {
                reminderElement.innerHTML = 'Recommended: <strong>Every 2-3 Days</strong>';
                reminderElement.nextElementSibling.textContent = 'Regular monitoring to maintain good health';
            }
        }

        function addSugarReading() {
            const level = parseInt(document.getElementById('newSugarLevel').value);
            const time = document.getElementById('testTime').value;
            if (level && time) {
                let status;
                if (level < 100) status = 'Low';
                else if (level <= 140) status = 'Normal';
                else if (level <= 180) status = 'Slightly High';
                else status = 'High';

                const newReading = {
                    level: level,
                    time: time,
                    date: 'Today',
                    status: status
                };
                sugarReadings.unshift(newReading);
                updateSugarHistory();
                updateSugarDisplay(level);

                document.getElementById('newSugarLevel').value = '';
                document.getElementById('testTime').value = '';
                currentUser.sugarLevel = level;
                generatePersonalizedContent();
            }
        }

        function updateSugarHistory() {
            const historyContainer = document.getElementById('sugarHistory');
            historyContainer.innerHTML = '';
            sugarReadings.forEach(reading => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.innerHTML = `
                    <div>
                        <strong>${reading.level} mg/dL</strong><br>
                        <small>${reading.status}</small>
                    </div>
                    <div>
                        <small>${reading.date} ${reading.time}</small>
                    </div>
                `;
                historyContainer.appendChild(historyItem);
            });
        }

        function markMedicine(time) {
            const medicineElements = document.querySelectorAll('.diet-item');
            medicineElements.forEach(element => {
                if (element.innerHTML.includes(time)) {
                    const button = element.querySelector('button');
                    const statusElement = element.querySelector('small');
                    if (button.style.background !== 'rgb(40, 167, 69)') {
                        button.innerHTML = '‚úì';
                        button.style.background = '#28a745';
                        button.style.color = 'white';
                        statusElement.innerHTML = ${time.charAt(0).toUpperCase() + time.slice(1)} - Taken ‚úÖ;
                    }
                }
            });
        }

        function setStressLevel(level) {
            const adviceElement = document.getElementById('stressAdvice');
            const stressLevels = document.querySelectorAll('.stress-level');
            stressLevels.forEach(sl => sl.style.transform = 'scale(1)');
            event.target.style.transform = 'scale(1.2)';
            let advice = '';
            switch(level) {
                case 'low':
                    advice = '<h4>Great! Keep it up!</h4><p>You\'re managing stress well. Continue with your current routine and regular exercise.</p>';
                    break;
                case 'medium':
                    advice = '<h4>Try some relaxation techniques</h4><p>Consider 10 minutes of deep breathing or light yoga to help reduce stress levels.</p>';
                    break;
                case 'high':
                    advice = '<h4>Immediate stress relief needed</h4><p>Take 15 minutes for meditation or call a friend. High stress can affect your sugar levels.</p>';
                    break;
            }
            adviceElement.innerHTML = advice;
            adviceElement.style.display = 'block';
        }

        document.addEventListener('DOMContentLoaded', function() {
            const now = new Date();
            const timeString = now.getHours().toString().padStart(2, '0') + ':' + 
                              now.getMinutes().toString().padStart(2, '0');
            document.getElementById('testTime').value = timeString;
            updateSugarHistory();
        });

        setInterval(() => {
            if (document.getElementById('dashboardPage').classList.contains('active')) {
                const progressBars = document.querySelectorAll('.progress-fill');
                progressBars.forEach(bar => {
                    const currentWidth = parseInt(bar.style.width) || 0;
                    if (currentWidth < 100) {
                        bar.style.width = (currentWidth + 1) + '%';
                    }
                });
            }
        }, 30000);

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#28a745' : type === 'warning' ? '#ffc107' : '#0a7a77'};
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                z-index: 1000;
                animation: slideIn 0.3s ease-out;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); }
                to { transform: translateX(0); }
            }
        `;
        document.head.appendChild(style);

        function checkMedicineReminders() {
            const now = new Date();
            const currentHour = now.getHours();
            if (currentHour === 8) {
                showNotification('Time for your morning medication!', 'warning');
            }
            if (currentHour === 20) {
                showNotification('Time for your evening medication!', 'warning');
            }
        }
        setInterval(checkMedicineReminders, 3600000);

        function exportHealthData() {
            const healthData = {
                user: currentUser,
                sugarReadings: sugarReadings,
                exportDate: new Date().toISOString()
            };
            const dataStr = JSON.stringify(healthData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);

            const link = document.createElement('a');
            link.href = url;
            link.download = 'sugar-sathi-health-data.json';
            link.click();

            URL.revokeObjectURL(url);
        }

        function emergencyAlert() {
            if (currentUser.sugarLevel > 250 || currentUser.sugarLevel < 70) {
                showNotification('Critical sugar level detected! Please consult your doctor immediately.', 'danger');
                alert('Emergency alert sent to your emergency contacts and healthcare provider.');
            }
        }

        function checkCriticalLevels() {
            if (currentUser.sugarLevel) {
                if (currentUser.sugarLevel > 250) {
                    showNotification('‚ö† Very High Sugar Level - Seek immediate medical attention!', 'danger');
                } else if (currentUser.sugarLevel < 70) {
                    showNotification('‚ö† Very Low Sugar Level - Have glucose tablets ready!', 'danger');
                }
            }
        }
    </script>
</body>
</html>